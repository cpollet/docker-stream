version: '0'
#name: stream 1
steps:
  - step:
    name: someWait
    image: alpine
    command:
      - echo a; sleep 1; echo b; sleep 1; echo c
  - step:
    name: writeFile
    image: alpine
    command:
      - echo Hello, $WHO > /stream_out/file
    environment:
      - WHO=world
  - step:
    name: readFile
    image: alpine
    command:
      - cat /stream_in/file
  - step:
    name: copyStreamFile
    image: alpine
    volumes:
      - .:/host
    command:
      - cp /host/docker-stream.yml /stream_out/docker-stream.yml
  - step:
    name: outputStreamFile
    image: alpine
    command:
      - cat /stream_in/docker-stream.yml
  - step:
    name: sleepTooMuch
    image: alpine
    command:
      - echo "please kill me (or wait 10 sec)"; sleep 10
